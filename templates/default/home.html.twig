{% extends "base.html.twig" %}

{% block title %}
    Home
{% endblock %}

{% block body %}
    <div class="home">

        <div class="home-events">

            <h2>Upcoming events</h2>
           {% for event in events %}
               {% include 'components/_event_card.html.twig' with { event: event } %}
           {% else %}
               <p>Aucun événement à venir.</p>
           {% endfor %}
        </div>
        <div class="your-event">
            {% if app.user %}
                <h2>Your next event</h2>

                {% if createdEvent %}

                    <div class="home-created event">
                        <div class="home-created-top">
                            <figure class="home-created-img event-img">
                                {% if createdEvent.image %}
                                    <img src="{{ asset('img/event/' ~ createdEvent.image) }}" alt="">
                                {% else %}
                                    <img src="{{ asset('img/partials/image_not_found.png') }}" alt="">
                                {% endif %}
                            </figure>

                            <div class="home-created-title">
                                <h2>{{ createdEvent.title|upper }}</h2>
                                <h3>Starts : {{ createdEvent.datetimeStart|date("d/m/Y H:i") }}</h3>
                                <h3>Ends : {{ createdEvent.datetimeEnd|date("d/m/Y H:i") }}</h3>
                            </div>

                        </div>

                        <p>{{ createdEvent.description }}</p>

                        <div class="home-created-bottom">
                            <div class="btns">
                                <a class="btn" href="{{ path('event_edit', {'id': createdEvent.id}) }}">Edit <i class="fa-solid fa-pen-to-square"></i></a>
                                <a class="btn" href="{{ path(name = 'event_show', parameters = {title: createdEvent.title, id: createdEvent.id}) }}">See more <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <p>You have not yet created an event</p>
                    <a class="btn" href="{{ path('event_new') }}">Create an event</a>
                {% endif %}
            {% else %}
                <h2>Login to create an event!</h2>
            {% endif %}
        </div>

    </div>
{% endblock %}
